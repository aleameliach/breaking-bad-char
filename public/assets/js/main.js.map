{"version":3,"sources":["00_main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["\"use strict\";\n\n\n//---------------------------------------QUERYS SELECTOR ---------------------------------------\n\nconst characterList = document.querySelector(\".js-list\");\nconst btn = document.querySelector(\".js-btn\");\nconst input = document.querySelector(\".js-input\");\nconst favouritesList = document.querySelector(\"js-fav-cards\");\nconst resetBtn = document.querySelector(\".js-reset-btn\");\n\n// -----------------------------VARIABLES GLOBALES--------------\n\nlet allCharacters = [];\nlet favouritesCharacters = [];\n\n//--------------------------------------------- FUNCIONES-------------------------------------------------------------------\n\nfunction renderOneCharacter(character) {\n\n\n  const characterInFavouritesIndex = favouritesCharacters.findIndex(\n    (eachCharacterObj) =>\n      eachCharacterObj.char_id === parseInt(character.char_id)\n  );\n  let classFavourite = \"\";\n  if (characterInFavouritesIndex === -1) {\n    classFavourite = \"\";\n  } else {\n    classFavourite = \"selected\";\n  }\n  return `\n  <li class=\"js-character characters___Articles ${classFavourite}\"id=\"${character.char_id}\">\n  <article class=\"characters___Articles___Item\">\n      <img src=\"${character.img}\" alt=\"\" class=\"characters___Articles___Item--img\">\n      <h3 class=\"characters___Articles___Item--h3\">${character.name}</h3>\n      <p class=\"characters___Articles___Item--p\">${character.status}</p>\n  </article>\n  </li>`;\n}\n\n\n\nfunction renderCharacters(allCharacters) {\n  characterList.innerHTML = \"\";\n  for (let i = 0; i < allCharacters.length; i++) {\n    characterList.innerHTML += renderOneCharacter(allCharacters[i]);\n  }\n  addCharacterListener();\n}\n\n\nfunction addCharacterListener() {\n  const allCharactersArticles = document.querySelectorAll(\".js-character\");\n  for (const character of allCharactersArticles) {\n    character.addEventListener(\"click\", handleCharacters);\n  }\n}\n\n\nfunction handleCharacters(event) {\n  event.currentTarget.classList.toggle(\"selected\");\n\n\n  const SelectedCharacters = allCharacters.find(\n    (eachCharacterObj) =>\n      eachCharacterObj.char_id === parseInt(event.currentTarget.id)\n  );\n\n\n  const characterInFavouritesIndex = favouritesCharacters.findIndex(\n    (eachCharacterObj) =>\n      eachCharacterObj.char_id === parseInt(event.currentTarget.id)\n  );\n\n  if (characterInFavouritesIndex === -1) {\n    favouritesCharacters.push(SelectedCharacters);\n    localStorage.setItem(\"characterFav\", JSON.stringify(favouritesCharacters));\n  }\n\n  else {\n    favouritesCharacters.splice(characterInFavouritesIndex, 1);\n    localStorage.setItem(\"characterFav\", JSON.stringify(favouritesCharacters));\n  }\n  renderFavCharacters();\n}\n\n\n\nfunction renderFavCharacters() {\n  let html = \"\";\n  for (const character of favouritesCharacters) {\n    html += renderOneCharacter(character);\n  }\n  favouritesList.innerHTML = html;\n}\n\n\n\nfunction searchCharacters(event) {\n  event.preventDefault();\n  const inputValue = input.value.toLowerCase();\n  const filteredCharacters = allCharacters.filter((character) =>\n    character.name.toLowerCase().includes(inputValue)\n  );\n  renderCharacters(filteredCharacters);\n}\n\nfunction resetFav(ev) {\n  ev.preventDefault();\n  localStorage.removeItem(\"characterFav\");\n  favouritesCharacters.length = [];\n  renderCharacters(allCharacters);\n  favouritesList.innerHTML = \"\";\n  resetBtn.classList.remove(\"hidden\");\n}\n\n//--------------------------------------------------------- EVENTOS------------------------------------------------\n\nbtn.addEventListener(\"click\", searchCharacters);\nresetBtn.addEventListener(\"click\", resetFav);\n\n// -----------------------------------------FETCH-------------------------------\n\nfetch(\"./assets/data/characters.json\")\n  .then((response) => response.json())\n  .then((data) => {\n    allCharacters = data;\n    renderCharacters(allCharacters);\n  });\n\n// ----------------------LOCAL STORAGE --------------\n\nconst savedLocalFAvs = JSON.parse(localStorage.getItem(\"characterFav\"));\n\nif (savedLocalFAvs !== null) {\n  favouritesCharacters = savedLocalFAvs;\n  renderFavCharacters();\n}"]}